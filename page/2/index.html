<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Kenny, 肉桂" />





  <link rel="alternate" href="/atom.xml" title="Kenny 肉桂的主页" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Kenny 肉桂的主页 记录自己的进步">
<meta property="og:type" content="website">
<meta property="og:title" content="Kenny 肉桂的主页">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Kenny 肉桂的主页">
<meta property="og:description" content="Kenny 肉桂的主页 记录自己的进步">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kenny 肉桂的主页">
<meta name="twitter:description" content="Kenny 肉桂的主页 记录自己的进步">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>

  <title> Kenny 肉桂的主页 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
  
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Kenny 肉桂的主页</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">记录自己的进步</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/19/其他技术/Vim实践Tips(二)/" itemprop="url">
                  Vim实践Tips(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-19T17:40:15+08:00" content="2016-07-19">
              2016-07-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/其他技术/" itemprop="url" rel="index">
                    <span itemprop="name">其他技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Tip_5_手动查找和替换">Tip 5 手动查找和替换</h2><p>下面每一行中都有 <code>content</code> 这个单词</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...We're waiting for content before the site can go live...</span><br><span class="line"></span><br><span class="line">...If you are content with this, let's go ahead with it...</span><br><span class="line"></span><br><span class="line">...We'll launch as soon as we have the content...</span><br></pre></td></tr></table></figure>
<p>如果我们想把所有的 <code>content</code> 替换成 <code>copy</code>, 那么可以很简单的想到替换命令.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">:%s/content/<span class="keyword">copy</span>/g</span><br></pre></td></tr></table></figure>
<p> 但是有时候我们并不想全局替换掉.</p>
<h3 id="懒惰点:不做输入的查找">懒惰点:不做输入的查找</h3><p> 你也许已经猜到<code>.</code>是我最喜欢的单键<code>Vim</code>命令.第二喜欢的是 <code>*</code>,它可以搜索处于光标下面的单词.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">...We're waiting for copy before the site can go live...</span><br><span class="line"></span><br><span class="line">...If you are copy with this, let's go ahead with it...</span><br><span class="line"></span><br><span class="line">...We'll launch as soon as we have the content...</span><br></pre></td></tr></table></figure>
<p> 首先将光标置于 <code>content</code> 上面,然后用<code>*</code>命令去查找它,这时候将发生两个事情:</p>
<ol>
<li><p>光标将跳转到下个匹配处(即下个 <code>content</code> 单词) </p>
</li>
<li><p>所有出现匹配项的地方将高亮显示 (如果没有,使用 <code>:set hls</code> .</p>
</li>
</ol>
<p>上面两件事情发生之后,我们就可以使用 <code>n</code> 命令跳转到下一个.这时候,使用 <code>*nn</code> 可以循环所有匹配,然后光标转到我们开始进行搜索的地方</p>
<h3 id="让更改变得可重复">让更改变得可重复</h3><p>当我们的光标置于 <code>content</code> 的开始位置的时候,我们准备去更改它.这包含两个步骤:</p>
<ol>
<li><p>删除单词 <code>content</code> </p>
</li>
<li><p>输入修改的内容. <code>cw</code> 删除到单词结尾命令,并且进入插入模式.</p>
</li>
</ol>
<p>然后我们输入 <code>copy</code> 这个单词. Vim 将记录我们的键盘点击,直到我们离开插入模式,所以, <code>cwcopy&lt;Esc&gt;</code> 将会被记录为一个单个命令.通过使用<code>.</code>就可以重复上面的操作.</p>
<h2 id="Tip6_Dot公式">Tip6 Dot公式</h2><p>在 Tip2中,我们试着将每个句子后面加<code>;</code> 最后,我们通过 <code>j.</code> 进行重复操作.</p>
<p>在 Tip3中,我们将每个<code>+</code>前后添加空格.  最后,我们通过 <code>;.</code> 进行重复操作</p>
<p>在 Tip5中,我们将 <code>content</code> 替换成 <code>copy</code>,最后,我们通过 <code>n.</code> 进行重复操作.</p>
<h3 id="理想的状态:_一个按键负责移动,一个按键负责执行操作-">理想的状态: 一个按键负责移动,一个按键负责执行操作.</h3><p> 在上面所有的操作中 . 重复最后的更改.这不是他们全部的共同点,我们都还用了一个键去移动光标.这已经是一个不能再好的情况了.我们在将来的编辑中,可以反复看到这个编辑模式.为了方便,我们把这个模式成为 Dot公式 (Dot Formula)</p>
<h2 id="Tip7_拿开你的笔刷">Tip7 拿开你的笔刷</h2><p><code>Normal Mode</code> (命令模式) 可以类比为一个画家,把笔刷离开画布.这时候,他可以休息,可以构思.同理,程序员也可以在 <code>Normal Mode</code> 中进行思考,组织自己的思路.当我们要改变的时候,也不用非得进入插入模式.在 <code>Normal Mode</code>中,我们可以格式化我们的代码,复制,或者移动他们.</p>
<h2 id="Tip8_强化你的撤销">Tip8 强化你的撤销</h2><p>在其他编辑器中,通过在输入一些东西之后进行撤销,可以撤销我们最后输入的单词或者字符.然后在 Vim 中,我们设置可以调整撤销命令的粒度.</p>
<p><code>u</code> 这个命令可以触发撤销命令.它可以撤销包括Normal,Visual还有 Command-Line 模式的更改.当然,也包括在插入模式下的文本输入或者删除.所以我们可以说: <code>i{ 插入一些更改}&lt; Esc&gt;</code>  构成了一个改变. 然后一次<code>u</code> 就可以撤销这个改变.</p>
<p>另外,插入模式中,如果使用了上下左右箭头,那么就相当于在 NormalMode下使用了 <code>hjkl</code>.区别就是我们不用离开插入模式,但是这些操作,会被记录到点公式 (Dot Fomula)中.</p>
<h2 id="Tip9_创建可重复的改变">Tip9 创建可重复的改变</h2><p>vim将重复操作进行了优化,为了利用这个特性.我们需要留心怎么创建可重复的改变</p>
<p>在 Vim 中,做一件事通常有很多方式.但是衡量”好”的方式的机制就是:更少的键盘敲击.</p>
<p>假设我们的光标在 <code>h</code> 这个字母上,我们想要删除单词 <code>nigh</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The end is nigh</span><br></pre></td></tr></table></figure>
<h3 id="1-_向后删除">1. 向后删除</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The end is nigh "开始</span><br><span class="line"></span><br><span class="line">The end is h "db  从光标位置删除单词的前面部分</span><br><span class="line"></span><br><span class="line">The end is  "x 删除当前光标的字符</span><br></pre></td></tr></table></figure>
<h3 id="2-_向前删除">2. 向前删除</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The end is nigh   "开始</span><br><span class="line"></span><br><span class="line">The end is nigh   "b  向后移动光标一个单词</span><br><span class="line"></span><br><span class="line">The end is        "dw 向前删除一个单词</span><br></pre></td></tr></table></figure>
<h3 id="3-_删除整个单词">3. 删除整个单词</h3><p>上面两个解决方案都牵涉到了一些准备工作,例如移动.其实,利用<code>aw</code> 命令可以更精准高效的完成我们的需求</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">The end ais nigh   "开始</span><br><span class="line"></span><br><span class="line">The end is "daw</span><br></pre></td></tr></table></figure>
<h3 id="4-_哪一个是最可重复的">4. 哪一个是最可重复的</h3><p>上面我们使用了三种方式进行删除一个单词.每种方式中,我们都是按了三个键,那么那种方式是更好的呢?</p>
<p>记住, Vim 优化了重复.那么检验好坏的标准就是重复.下面使用dot 命令来检验三种方式,通过测试发现:</p>
<ul>
<li><p>第一种方式: <code>.</code> 等价于 <code>x</code> (<code>db</code> 是改变操作. <code>x</code> 也是改变操作)</p>
</li>
<li><p>第二种方式: <code>.</code> 等价于 <code>dw</code> (<code>b</code> 是纯移动, <code>dw</code> 是改变操作)</p>
</li>
<li><p>第三种方式: <code>.</code> 等价于 <code>daw</code> (<code>daw</code>是改变操作)</p>
</li>
</ul>
<p>看起来<code>2</code> <code>3</code> 都是挺有用的,但是有个细节 <code>2</code>删除一个单词,但是不会删除对应的空格,表象上来看就是不会移动光标到下个单词上,那么这时候, <code>.</code>这个命令就没什么意义. <code>3</code> 会把要删除的单词附带空格删除,同时光标停留在 <code>is</code> 的结尾.那么<code>.</code>这个操作就能继续删除一个单词. (我强烈建议自己动手试试看)</p>
<p>﻿</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/18/其他技术/Vim实践Tips(一)/" itemprop="url">
                  Vim实践Tips(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-18T15:12:36+08:00" content="2016-07-18">
              2016-07-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/其他技术/" itemprop="url" rel="index">
                    <span itemprop="name">其他技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Tip_1_dot_命令">Tip 1 dot 命令</h1><p>说明: . dot 重复上个命令的使用</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">line one</span><br><span class="line"></span><br><span class="line">line two</span><br><span class="line"></span><br><span class="line">line three </span><br><span class="line"></span><br><span class="line">line four</span><br></pre></td></tr></table></figure>
<p><code>x</code> :删除当前光标下的字符</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> one " x . . .  x 删除, . 重复</span><br><span class="line"></span><br><span class="line">line two</span><br><span class="line"></span><br><span class="line">line three </span><br><span class="line"></span><br><span class="line">line four</span><br></pre></td></tr></table></figure>
<p>如图:<br><img src="http://7xv9rf.com1.z0.glb.clouddn.com/1xdotdot.gif" alt="dot 命令的使用"></p>
<h2 id="几个小提示:">几个小提示:</h2><h3 id=":set_nu_显示行号_:set_nonu_关闭行号显示">:set nu 显示行号 :set nonu 关闭行号显示</h3><p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/2setnu.gif" alt="显示和关闭行号"></p>
<h3 id=":3,5_co_8_将9到12行的内容输出到8行">:3,5 co 8 将9到12行的内容输出到8行</h3><p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/003line_copy.gif" alt="输出范围到领一行"></p>
<h3 id=":3,5_de_删除3到5行的内容">:3,5 de 删除3到5行的内容</h3><p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/004delete.gif" alt="删除范围"></p>
<p><code>&gt;G</code> 增加从当前行到文件末尾所有行的缩进.同理,使用 . 可以重复增加缩进</p>
<p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/005_intent.gif" alt="重复缩进"></p>
<p>还可以利用 j. 做成下面的布局</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">line one</span><br><span class="line"></span><br><span class="line">	line two</span><br><span class="line"></span><br><span class="line">		line three </span><br><span class="line"></span><br><span class="line">			line four</span><br></pre></td></tr></table></figure>
<p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/007_jdot.gif" alt="梯形缩进"></p>
<h1 id="Tip_2_不要重复">Tip 2 不要重复</h1><p>例如,我们想要在下面所有的行后面加一个分号</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var foo = 1</span><br><span class="line"></span><br><span class="line">var bar = 'bar'</span><br><span class="line"></span><br><span class="line">var foobar = foo + bar</span><br></pre></td></tr></table></figure>
<p>使用 <code>$</code> 移动到行末尾,<code>a</code>追加然后输入<code>;</code> ,然后按<code>&lt;Esc&gt;</code>返回命令模式.这算完成了第一行</p>
<p>如果对下面两行也应用这个,就应该: <code>j$.</code> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var foo = 1;</span><br><span class="line"></span><br><span class="line">var bar = 'bar'; "j$.</span><br><span class="line"></span><br><span class="line">var foobar = foo + bar; "j$.</span><br></pre></td></tr></table></figure>
<p>虽然这样也能完成,但是还是差点意思.还是有提升空间的.</p>
<h3 id="减少无关的移动">减少无关的移动</h3><p><code>a</code> 是在当前光标位置后面追加,并自动切换到插入模式</p>
<p><code>A</code> 是在当前行末进行追加,并自动切换到插入模式 相当于 <code>$a</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var foo = 1;	" A;&lt;Esc&gt;</span><br><span class="line"></span><br><span class="line">var bar = 'bar'; " j.</span><br><span class="line"></span><br><span class="line">var foobar = foo + bar; " j.</span><br></pre></td></tr></table></figure>
<p><code>d</code> 删除，不能单独用，得跟后续操作符，比如 <code>dd</code> 是删除一整行，<code>d$</code> 是删除直到行的末尾</p>
<p><code>x</code> 删除当前光标下的单个字符</p>
<p><code>c</code> 跟 <code>d</code> 类次，但是删除完成后会进入插入模式</p>
<p><code>c</code> 和 <code>d</code> 都要加入<code>motion</code> <code>motion</code>类似是 <code>w</code> <code>b</code> 等这些</p>
<p><code>23,35 co 66</code> 复制</p>
<p><code>23,35 m 66</code> 剪切</p>
<p><code>23,35 de</code> 删除</p>
<p>几个一个顶俩的快捷键</p>
<p><code>C c$</code> 删除到行末尾,并进入插入模式</p>
<p><code>s cl</code> 替换当前字符: c加motion,l 一个字符</p>
<p><code>S ^C</code> 删除整个行 ^移动到行首,C删除整行</p>
<p><code>I ^i</code> 到行首进行插入</p>
<p><code>A $a</code> 到行尾进行插入</p>
<p><code>o A&lt;CR&gt;</code> 进入下一行,并进入插入模式 <cr>是回车的意思</cr></p>
<p><code>O ko</code> 进入上一行,然后插入</p>
<h2 id="Tip_3_退一步,进三步">Tip 3 退一步,进三步</h2><figure class="highlight"><figcaption><span>foo = "method("+argument1+","+argument2+")";```objc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;&#19978;&#38754;&#30340;&#20195;&#30721;&#30475;&#30528;&#19981;&#22826;&#33298;&#26381;,&#22240;&#20026;&#22312;&#25105;&#20204;&#21360;&#35937;&#20013;,&#21152;&#21495;&#20004;&#36793;&#24212;&#35813;&#26377;&#31354;&#26684;.&#37027;&#20040;&#25105;&#20204;&#26469;&#30475;&#24590;&#20040;&#20197;Vim&#30340;&#26041;&#24335;&#23436;&#25104;&#36825;&#20010;&#20219;&#21153;:&#10;&#10;`f+` &#26597;&#25214;&#26368;&#36817;&#30340;`+` , `s` &#26367;&#25442;`+` &#20026; `&#31354;&#26684;+&#31354;&#26684;`&#10;&#10;```var foo = &#34;method(&#34; + argument1+&#34;,&#34;+argument2+&#34;)&#34;;</span><br></pre></td></tr></table></figure>
<p>对于后面的,我们当然可以使用 <code>f+</code> 然后 <code>.</code> 重复替换,完成任务.</p>
<p>但是这里有个新的操作符 <code>;</code> 这个 <code>;</code> 可以重复执行最近的查找操作.<code>f+</code>就是一个查找操作.所以,对于后面的<code>+</code> ,我们可以通过 <code>;.</code> 依次完成替换.</p>
<h2 id="Tip4_操作,重复,撤销">Tip4 操作,重复,撤销</h2><p>通过以上的几个tip,我们学会了,先操作,然后另其重复执行,借此完成一些重复任务.</p>
<p>但是有时候,我们可能在反复的重复操作中,按多了.例如 tip2 中的 j.j.j. 很可能顺序按错了. 如果出现错误,那么我们就可以在出错的时候按 u 来撤销操作.又或者,Tip3中的;按多了(意味着移动的太过了)那么可以使用,来跳回去.</p>
<p>通过以上的描述,能看出来,不同的误操作,对应着不同的撤销方式.下面是个参考表</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">意图				操作				重复		撤销</span><br><span class="line"></span><br><span class="line">改变点东西			&#123;edit&#125;			.		u</span><br><span class="line"></span><br><span class="line">行内查找下个字符	f&#123;<span class="keyword">char</span>&#125;/t&#123;<span class="keyword">char</span>&#125;		;		,</span><br><span class="line"></span><br><span class="line">行内查找前一个字符	F&#123;<span class="keyword">char</span>&#125;/T&#123;<span class="keyword">char</span>&#125;		;		,</span><br><span class="line"></span><br><span class="line">在文档内查找下个匹配	/pattern&lt;CR&gt; 		n		N</span><br><span class="line"></span><br><span class="line">在文档内查找前个匹配	?pattern&lt;CR&gt;		n		N</span><br><span class="line"></span><br><span class="line">执行替换		:s/target/replacement	&amp;		u</span><br><span class="line"></span><br><span class="line">执行一系列改变		qx&#123;changes&#125;q		@x		  u</span><br></pre></td></tr></table></figure>
<p><code>f</code> 和 <code>t</code> 的区别是 <code>f</code> 停留光标在查找字符,<code>t</code>光标停留在查找字符之前</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/14/视频相关/视频裁剪/" itemprop="url">
                  视频裁剪
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-14T15:25:06+08:00" content="2016-07-14">
              2016-07-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/视频相关/" itemprop="url" rel="index">
                    <span itemprop="name">视频相关</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="AVAsset">AVAsset</h3><p>AVAsset是一个表现音视频媒体的抽象类.AVAsset对象给我们开发提供了媒体文件的访问接口.<br>这个 AVAsset 可以通过文件创建,也可以是来自用户相册目录的.如果获得了一个视频文件的 AVAsset,我们就可以从中获取静态图片,转换格式,或者是裁剪内容.</p>
<p>通过以下代码,获得特定位置的视频文件:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString * videoPath = @&#34;a video file path&#34;;&#10;AVAsset *anAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:videoPath] options:nil];&#10;```objc&#10;&#20854;&#20013; options &#26159;&#19968;&#20010;&#23383;&#20856;,&#36825;&#20010;&#23383;&#20856;&#21482;&#26377;&#19968;&#20010; key-value:&#10;`AVURLAssetPreferPreciseDurationAndTimingKey` value &#26159; `YES` &#25110;&#32773; `NO`&#10;&#10;&#36825;&#20010;&#26159;&#35774;&#32622;&#26102;&#38388;&#31934;&#30830;&#24230;&#30340;,&#22914;&#26524;&#35774;&#32622;&#20026; YES, &#37027;&#20040;&#20250;&#36896;&#25104;&#24456;&#22823;&#30340;&#24320;&#38144;,&#20294;&#26159;&#21487;&#20197;&#20445;&#35777;&#25805;&#20316;&#30340;&#31934;&#24230;,&#23545;&#20110;&#25105;&#30340;&#35009;&#21098;&#25805;&#20316;,&#19981;&#29992;&#35774;&#32622;.&#22240;&#20026;&#25105;&#30340;&#19994;&#21153;&#20013;,&#35009;&#21098;&#33539;&#22260;&#26159;&#29992;&#25143;&#28369;&#22359;&#25805;&#20316;&#30340;,&#26412;&#26469;&#31934;&#24230;&#23601;&#35201;&#27714;&#19981;&#39640;.&#10;&#20256;&#36882; nil &#21644; &#20256;&#36882; NO, &#20004;&#32773;&#31561;&#25928;.&#10;&#29305;&#21035;&#30340;,&#24403;&#36827;&#34892;&#35270;&#39057;&#21512;&#25104;&#25805;&#20316;&#30340;&#26102;&#20505;,&#38656;&#35201;&#35774;&#32622;&#36825;&#20010;&#23383;&#20856;,&#24182;&#23558; value &#35774;&#32622;&#20026; `YES`,&#22240;&#20026;&#22914;&#26524;&#31934;&#24230;&#19981;&#22815;,&#21487;&#33021;&#36896;&#25104;&#38899;&#35270;&#39057;&#19981;&#21516;&#27493;&#31561;&#38382;&#39064;.&#10;&#10;### AVAssetExportSession&#10;&#10;AVAssetExportSession &#26159;&#19968;&#20010;&#25511;&#21046; Asset &#24322;&#27493;&#23548;&#20986;&#30340;&#23545;&#35937;.&#21487;&#20197;&#23454;&#29616;&#35009;&#21098;&#35270;&#39057;,&#36716;&#25442;&#26684;&#24335;&#31561;&#38656;&#27714;. &#20195;&#30721;&#22914;&#19979;:</span><br></pre></td></tr></table></figure>
<p>  exportSession_ = [[AVAssetExportSession alloc]<br>                              initWithAsset:anAsset presetName:AVAssetExportPreset960x540]<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">这个`presetName` 是系统提供的预设,有一些常用的视频分辨率和视频质量控制的选项.可以按住`command`自行查看.另外.如果预设的分辨率不能满足需求,我们还可以自定义任意分辨率,这个将在我以后的文章中进行说明.</span><br><span class="line"></span><br><span class="line">然后就是配置`<span class="built_in">AVAssetExportSession</span>`,下面分别配置了`导出路径`,`导出文件格式`,`截取范围`:</span><br></pre></td></tr></table></figure></p>
<p>exportSession<em>.outputURL = tempVideoURL;<br>exportSession</em>.outputFileType = AVFileTypeMPEG4;<br>exportSession_.timeRange = [self videoTimeRange:anAsset];<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">需要说明的是这个截取范围的实现:</span><br></pre></td></tr></table></figure></p>
<p>-(CMTimeRange)videoTimeRange:(AVAsset*)anAsset{<br>    CMTime start = CMTimeMakeWithSeconds(self.videoRange.startTime, anAsset.duration.timescale);<br>    CMTime duration = CMTimeMakeWithSeconds(self.videoRange.duration, anAsset.duration.timescale);<br>    CMTimeRange range = CMTimeRangeMake(start, duration);<br>    return range;<br>}<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`CMTime` 是一个结构体对象,常用的两个值是: `value` 和 `timescale`. 两者的关系可以表示为: `value/timescale=seconds`.</span><br><span class="line"></span><br><span class="line">在上面的方法中,我将来自滑块的值(秒为单位),转换成了`CMTime`然后构造了一个` CMTimeRange` 对象.</span><br><span class="line"></span><br><span class="line">最后进行导出:</span><br></pre></td></tr></table></figure></p>
<p> [exportSession<em> exportAsynchronouslyWithCompletionHandler:^{<br>                    switch (exportSession</em>.status) {<br>                    case AVAssetExportSessionStatusUnknown: {</p>
<pre><code>            <span class="keyword">break</span>;
        }
        <span class="keyword">case</span> <span class="string">AVAssetExportSessionStatusWaiting:</span> {

            <span class="keyword">break</span>;
        }
        <span class="keyword">case</span> <span class="string">AVAssetExportSessionStatusExporting:</span> {

            <span class="keyword">break</span>;
        }
        <span class="keyword">case</span> <span class="string">AVAssetExportSessionStatusCompleted:</span> {

            <span class="keyword">break</span>;
        }
        <span class="keyword">case</span> <span class="string">AVAssetExportSessionStatusFailed:</span> {

            <span class="keyword">break</span>;
        }
        <span class="keyword">case</span> <span class="string">AVAssetExportSessionStatusCancelled:</span> {

            <span class="keyword">break</span>;
        }
    }
}];
</code></pre><p>```objc</p>
<p>可以对各种状态进行判断.进而采取不同的操作.通常关心的是<code>Failed</code> 和<code>Completed</code> ,前者给用户提示,后者进行后续操作.</p>
<p>到此,就完成了一段视频的裁剪操作.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/02/React Native/一个React Native项目-一些注意点/" itemprop="url">
                  一个React Native项目-一些注意点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-02T15:39:39+08:00" content="2016-07-02">
              2016-07-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React Native</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="对http网络请求的支持">对http网络请求的支持</h2><p>由于在iOS9开始,Apple强制了https的请求.但是如果服务器还不支持,那么应该在plist中添加以下字段:<br><img src="http://7xv9rf.com1.z0.glb.clouddn.com/29000QQ20160901-2.png" alt="29000QQ20160901-2.png"></p>
<p>这步要注意,ReactNative并没有聪明替你配置好这个<code>iOS的环境</code>,我是在各种网络请求都异常后,才发现的这个问题.</p>
<h2 id="提取文件">提取文件</h2><p>因为要同时支持iOS和Android, 那么我们就不应该将布局代码写到<code>index.android.js</code>或者<code>index.ios.js</code>中,当然也不应该写好一个,然后copy到另一个,无论怎么说,如果分散,我们将面临维护多份代码的窘境.所以好的方式是,将实现提取出来,在<code>index.android.js</code>和<code>index.ios.js</code>中,只保持对接口文件的引用.类似下面:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class G<span class="built_in">UIShopping</span> extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Main/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Android的启动页面">Android的启动页面</h2><p>Android本身没有像iOS那么方便的配置启动页的方式,原生的方式是通过<code>Activity</code>来制造假象,同理,利用<code>ReactNative</code>还是要做这个处理.<br>代码如下:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class GUIShopping extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;Navigator</span><br><span class="line">            initialRoute=&#123;&#123;name:'启动页',component:LaunchImage&#125;&#125;</span><br><span class="line">            configureScene=&#123;()=&gt;&#123; return Navigator.SceneConfigs.PushFromRight; &#125;&#125;</span><br><span class="line">            renderScene=&#123;(route,navigator)=&gt;&#123;</span><br><span class="line">                            let Component = route.component;</span><br><span class="line">                            return &lt;Component &#123;...route.passProps&#125; navigator=&#123;navigator&#125;/&gt;</span><br><span class="line">                        &#125;&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而LaunchImage就是一个普通的Component,里面有个定时器,在规定时间内切换到主页,看起来效果和iOS是一样的,主要代码如下:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class LaunchImage extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">                &lt;Image source = &#123;&#123;uri:'launchimage'&#125;&#125; style=&#123;styles.launchImage&#125;/&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        setTimeout(()=&gt;&#123;</span><br><span class="line">            //页面的切换</span><br><span class="line">            this.props.navigator.replace(&#123;</span><br><span class="line">                component:Main,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,2000);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="ListView横向排版的实现">ListView横向排版的实现</h2><p>默认的<code>ListView</code>是和<code>iOS</code>的<code>TableView</code>类似的,也就是上下滑动,如果想要实现类似<code>CollectionView</code>的布局效果,那么需要做一些配置:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListView</span><br><span class="line">              dataSource=&#123;this.state.dataSource&#125;</span><br><span class="line">              renderRow=&#123;this.renderRow&#125;</span><br><span class="line">              contentContainerStyle=&#123;styles.contentView&#125;</span><br><span class="line">              scrollEnabled=&#123;false&#125;</span><br><span class="line">          &gt;</span><br><span class="line"></span><br><span class="line">          &lt;/ListView&gt;</span><br></pre></td></tr></table></figure>
<p>contentView的实现如下:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">contentView:&#123;</span><br><span class="line">       flexDirection:'row',</span><br><span class="line">       flexWrap:'wrap',</span><br><span class="line">       width:width,</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<p> 要点:</p>
<ol>
<li>要指定<code>ListView</code>的宽度</li>
<li><p>cell应该具备宽高(特别坑)</p>
<p>其中第二条没有发现有资料提及,但是自己编码的时候发现,只有设置好cell的宽度和高度,才能实现预想的效果.<br>最终效果如下:</p>
<p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/93550QQ20160901-3.png" alt="93550QQ20160901-3.png"></p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/01/React Native/一个React-Native项目-项目介绍/" itemprop="url">
                  一个React Native项目-项目介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-01T15:25:24+08:00" content="2016-07-01">
              2016-07-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Native/" itemprop="url" rel="index">
                    <span itemprop="name">React Native</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="背景">背景</h2><p>从<code>ReactNative</code>诞生的那天开始,就对它非常关注.一方面是欢喜可以有个靠谱的方案来实现跨平台开发了,另一方面也是担心它虎头蛇尾.好在,到现在看来,它势头还是很猛的.</p>
<p>现在接触<code>ReactNative</code>也有一定时间了,知识比较零散,所以想借助一个练手项目来串一下知识,粗略的模仿了美团的客户端.</p>
<p>项目使用<code>ES6语法</code> ,最终效果如下:</p>
<p><img src="http://7xv9rf.com1.z0.glb.clouddn.com/32248shopping.gif" alt="32248shopping.gif"></p>
<h2 id="代码">代码</h2><p>代码已经开源到 <a href="https://github.com/guiqingblog/GUIShopping" target="_blank" rel="external">github</a></p>
<h2 id="说明">说明</h2><p>因为代码已经上传,所以就不在赘述,主要分开说说一些注意点.这些我将分文章阐述.</p>
<h2 id="一些资料">一些资料</h2><p><a href="http://reactnative.cn/" target="_blank" rel="external">Reat Native中文官网</a> 这上面关于环境配置和基础控件的使用都非常全面,是必不可少的参考资料.</p>
<p><a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank" rel="external">Flexbox</a> ReactNative中大量使用了Flexbox进行布局,所以这方面的知识必不可少</p>
<p><a href="http://www.oschina.net/news/61214/11-react-native-ui-components" target="_blank" rel="external">11款ReactNative开源组件</a> 研究别人的代码是一种非常好的提升方式</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/18/ReactiveCocoa/RACObserve-和-rac-textSignal-的搭配使用/" itemprop="url">
                  RACObserve 和 rac_textSignal 的搭配使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-18T23:28:19+08:00" content="2016-06-18">
              2016-06-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ReactiveCocoa/" itemprop="url" rel="index">
                    <span itemprop="name">ReactiveCocoa</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>项目中有个小需求,文本框与按钮绑定.当文本框内容符合规则的时候,按钮才会可用.把判定条件修改一下,代码如下:</p>
 <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> RAC(<span class="keyword">self</span><span class="variable">.loginButton</span>,enabled)  = [<span class="keyword">self</span><span class="variable">.textFiled</span><span class="variable">.rac_textSignal</span>  map:^<span class="keyword">id</span>(<span class="built_in">NSString</span> *value) &#123;</span><br><span class="line">    <span class="keyword">return</span> @(value<span class="variable">.length</span>&gt;<span class="number">3</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>但是如果在发送请求之后,通过代码清除了文本框的内容,按钮并不会改变状态. </p>
<p> 想到了, 应该是这个 <code>rac_textSignal</code> 出现问题了.<br> 看一下它的实现:<br> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> - (RACSignal *)rac_textSignal &#123;</span><br><span class="line">	@weakify(<span class="keyword">self</span>);</span><br><span class="line">	<span class="keyword">return</span> [[[[[RACSignal</span><br><span class="line">		defer:^&#123;</span><br><span class="line">			@strongify(<span class="keyword">self</span>);</span><br><span class="line">			<span class="keyword">return</span> [RACSignal <span class="keyword">return</span>:<span class="keyword">self</span>];</span><br><span class="line">		&#125;]</span><br><span class="line">		concat:[<span class="keyword">self</span> rac_signalForControlEvents:<span class="built_in">UIControlEventAllEditingEvents</span>]]</span><br><span class="line">		map:^(<span class="built_in">UITextField</span> *x) &#123;</span><br><span class="line">			<span class="keyword">return</span> x<span class="variable">.text</span>;</span><br><span class="line">		&#125;]</span><br><span class="line">		takeUntil:<span class="keyword">self</span><span class="variable">.rac_willDeallocSignal</span>]</span><br><span class="line">		setNameWithFormat:<span class="string">@"%@ -rac_textSignal"</span>, <span class="keyword">self</span><span class="variable">.rac_description</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>几个关键词的解释:<br><code>defer</code> : 将代码的创建推迟到信号被订阅<br><code>concat</code>: 连接信号,第一个信号必须发送完成，第二个信号才会被激活<br><code>map</code> : 映射,将信号内容转换<br><code>takeUtil</code> :  signalA takeUntil:signalB 当signalB激活之后,停止signalA 的订阅</p>
<p>其实主要的是, 这个 <code>signal</code> 是监听的: <code>UIControlEventAllEditingEvents</code> . 那么也就是说对<code>setter</code> 方式不会触发信号 </p>
<p><code>RACObserve</code> 是一个常用的宏,我们都知道是监听属性值改变的.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#define RACObserve(TARGET, KEYPATH) \</span></span><br><span class="line">	(&#123; \</span><br><span class="line">		_Pragma(<span class="string">"clang diagnostic push"</span>) \</span><br><span class="line">		_Pragma(<span class="string">"clang diagnostic ignored \"-Wreceiver-is-weak\""</span>) \</span><br><span class="line">		__<span class="keyword">weak</span> <span class="keyword">id</span> target_ = (TARGET); \</span><br><span class="line">		[target_ rac_valuesForKeyPath:@keypath(TARGET, KEYPATH) observer:<span class="keyword">self</span>]; \</span><br><span class="line">		_Pragma(<span class="string">"clang diagnostic pop"</span>) \</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>
<p>主要代码是:<code>[target_ rac_valuesForKeyPath:@keypath(TARGET, KEYPATH) observer:self];</code><br>然后这个<code>rac_valuesForKeyPath</code>的实现如下:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (RACSignal *)rac_valuesForKeyPath:(<span class="built_in">NSString</span> *)keyPath observer:(__<span class="keyword">weak</span> <span class="built_in">NSObject</span> *)observer &#123;</span><br><span class="line">	<span class="keyword">return</span> [[[<span class="keyword">self</span></span><br><span class="line">		rac_valuesAndChangesForKeyPath:keyPath options:<span class="built_in">NSKeyValueObservingOptionInitial</span> observer:observer]</span><br><span class="line">		map:^(RACTuple *value) &#123;</span><br><span class="line">			<span class="comment">// -map: because it doesn't require the block trampoline that -reduceEach: uses</span></span><br><span class="line">			<span class="keyword">return</span> value[<span class="number">0</span>];</span><br><span class="line">		&#125;]</span><br><span class="line">		setNameWithFormat:<span class="string">@"RACObserve(%@, %@)"</span>, <span class="keyword">self</span><span class="variable">.rac_description</span>, keyPath];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主要代码:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rac_valuesAndChangesForKeyPath:keyPath options:<span class="built_in">NSKeyValueObservingOptionInitial</span> observer:observer]</span><br></pre></td></tr></table></figure>
<p>也就是这个是通过 <code>KVO</code> 实现的. 而 <code>KVO</code> 得实现是通过临时生成一个子类,并重写父类的 <code>setter</code> 方法.这个在官方文档中有说明:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Key-Value Observing Implementation Details</span><br><span class="line"></span><br><span class="line">Automatic key-value observing is implemented using a technique called isa-swizzling. </span><br><span class="line">The isa pointer, as the name suggests, points to the object's class which maintains a dispatch table. This dispatch table essentially contains pointers to the methods the class implements, among other data. </span><br><span class="line">When an observer is registered for an attribute of an object the isa pointer of the observed object is modified, pointing to an intermediate class rather than at the true class. As a result the value of the isa pointer does not necessarily reflect the actual class of the instance. </span><br><span class="line">You should never rely on the isa pointer to determine class membership. Instead, you should use the class method to determine the class of an object instance.</span><br></pre></td></tr></table></figure>
<h3 id="最终实现">最终实现</h3><p>了解了两者的实现,就可以很容易实现代码:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RAC(<span class="keyword">self</span><span class="variable">.loginButton</span>,enabled) =[ [RACObserve(<span class="keyword">self</span><span class="variable">.textFiled</span>, text)  merge:<span class="keyword">self</span><span class="variable">.textFiled</span><span class="variable">.rac_textSignal</span> ] map:^<span class="keyword">id</span>(<span class="built_in">NSString</span> *value) &#123;</span><br><span class="line">     <span class="keyword">return</span> @(value<span class="variable">.length</span>&gt;<span class="number">3</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/15/Swift/Swift3-新特性/" itemprop="url">
                  Swift3 新特性 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-15T14:51:18+08:00" content="2016-06-15">
              2016-06-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>看了一下刚出的 Session 406,简单记录一下关于 Swift3.0相比2.2的改动. 能力有限,若有谬误,欢迎指正 .</p>
<h3 id="简化的_API">简化的 API</h3><ul>
<li>优化将方法名切分,将操作中的动词提取,作为方法名.将其余部分作为参数名.</li>
<li>在不引起歧义的情况下,去掉了重复性的名词.</li>
</ul>
<p>Swift 2.2</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var array:Array = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">array<span class="variable">.appendContentsOf</span>([<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">array<span class="variable">.insert</span>(<span class="number">1</span>, atIndex: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">var url = <span class="built_in">NSURL</span>(string: <span class="string">"randomLoacation"</span>)!</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> url<span class="variable">.fileURL</span> &#123;&#125;</span><br><span class="line">var x = url<span class="variable">.URLByAppendingPathComponent</span>(<span class="string">"file.txt"</span>)</span><br></pre></td></tr></table></figure>
<p>Swift 3.0</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Swift.Array</span></span><br><span class="line">var array:Array = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">array<span class="variable">.append</span>(contentsOf: [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">array<span class="variable">.insert</span>(<span class="number">1</span>, at: <span class="number">0</span>) <span class="comment">//index没有什么特定信息,只是重复</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Foudation.NSURL</span></span><br><span class="line">var url = <span class="built_in">NSURL</span>(string: <span class="string">"randomLoacation"</span>)!</span><br><span class="line"><span class="keyword">if</span> url<span class="variable">.isFileURL</span> &#123;&#125; <span class="comment">//意思更明确</span></span><br><span class="line">var x = url<span class="variable">.appendingPathComponent</span>(<span class="string">"file.txt"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="一致的函数参数标签">一致的函数参数标签</h3><p>原来2.2中, 第一个参数标签可以省略.类似这样:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">func myFunction(a: Int , b: Int , c: Int)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myFunction(<span class="number">42</span>, b: <span class="number">57</span>, c: <span class="number">39</span>)</span><br></pre></td></tr></table></figure>
<p>在 3.0 中,上面的用法会报错. 需要显式写出标签,类似这样:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">func myFunction(a: Int , b: Int , c: Int)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myFunction(a: <span class="number">10</span>, b: <span class="number">10</span>, c: <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>当然,如果实在不想写,可以在声明的时候使用 <code>_</code> .</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">func myFunction(_ a: Int , b: Int , c: Int)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myFunction(<span class="number">10</span>, b: <span class="number">10</span>, c: <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h3 id="移动_Where_语句到函数声明的结尾">移动 Where 语句到函数声明的结尾</h3><p>在 Swift2.2中,泛型约束语句<code>Where</code>需要放到泛型的<code>&lt;&gt;</code>中.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func anyCommon&lt;T: SequenceType, U: SequenceType</span><br><span class="line">    where T<span class="variable">.Generator</span><span class="variable">.Element</span> : Equatable,</span><br><span class="line">    T<span class="variable">.Generator</span><span class="variable">.Element</span> == U<span class="variable">.Generator</span><span class="variable">.Element</span>&gt;(lhs: T, rhs: U) -&gt; Bool&#123;</span><br><span class="line">    print(<span class="string">"here"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 Swift3.0中,将其提取到声明之后:<br>代码是参考的 Session 中的代码,但是本人用 Xcode8.0的 Playground 报错.但是主旨不会错,就是将<code>Where</code>语句提取出来.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func anyCommons&lt;T: Sequence, U: Sequence&gt;(lhs: T, rhs: U) -&gt; Bool</span><br><span class="line">    where T<span class="variable">.Element</span>: Equatable,T<span class="variable">.Element</span> == U<span class="variable">.Element</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">"here"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="结果未使用警告的方法">结果未使用警告的方法</h3><p>对于一个没有使用的函数返回值(或者自定义的变量值),编译器都会给你一个警告.因为既然你认为有返回值, 而你却没有使用.这可能就是你忘记了.这种操作可能会造成你编码的 bug</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func plusOne(_ a : Int) -&gt;Int&#123;</span><br><span class="line">         print(a)</span><br><span class="line">         <span class="keyword">return</span> a+<span class="number">1</span></span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     plusOne(<span class="number">3</span>) <span class="comment">//得到警告 Result of call to 'plusOne' is unused</span></span><br></pre></td></tr></table></figure>
<p>但是一些情况下.我们确实不需要用到这个返回值,而且仅仅是为了函数的一个副作用( side effect) 而去调用函数. 例如,上面代码中的<code>print(a)</code>.这就是我调用函数的目的.<br>为了消除警告,可以使用如下方式:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">func plusOne(_ a : Int) -&gt;Int&#123;</span><br><span class="line">    print(a)</span><br><span class="line">    <span class="keyword">return</span> a+<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_ =  plusOne(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>或者使用标记 <code>@discardableResult</code>:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@discardableResult</span><br><span class="line">func plusOne(_ a : Int) -&gt;Int&#123;</span><br><span class="line">    print(a)</span><br><span class="line">    <span class="keyword">return</span> a+<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plusOne(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h3 id="索引集合">索引集合</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let collection = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>]</span><br><span class="line"></span><br><span class="line">var i = collection<span class="variable">.startIndex</span></span><br></pre></td></tr></table></figure>
<p>在 Swift 2.2 中</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift <span class="number">2</span> : var next = i<span class="variable">.successor</span>()</span><br></pre></td></tr></table></figure>
<p>在 Swift 3.0 中</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var next = collection<span class="variable">.index</span>(after: <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="浮点型和数值型">浮点型和数值型</h3><ul>
<li>Float,Double,Float80 和 CGFloat统一使用新的浮点协议( Floating Point Protocol )</li>
<li>提供 IEEE-754 相关的属性和方法 (IEEE 754 标准是IEEE二进位浮点数算术标准（IEEE Standard for Floating-Point Arithmetic）的标准编号  ，等同于国际标准ISO/IEC/IEEE 60559[2])</li>
<li>允许在所有的浮点类型上使用算法泛型(水平有限,原文是:permits algrithms to be gerneric over all floating point types)</li>
</ul>
<p>用 PI 来举个例子:<br>Swift 2.2</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let v = <span class="number">2</span> * Float(M_PI)</span><br></pre></td></tr></table></figure>
<p>而在 Swift3.0中</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let v = <span class="number">2</span> * Float<span class="variable">.pi</span></span><br></pre></td></tr></table></figure>
<p>如果第一个操作数是浮点数,还可以这样写:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let anotherV = <span class="number">2.0</span> * <span class="variable">.pi</span> / <span class="number">180</span></span><br></pre></td></tr></table></figure>
<h3 id="隐式解包可选">隐式解包可选</h3><p>在 Swift2.2中<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func f(value: Int!)&#123;</span><br><span class="line">    let x = value + <span class="number">1</span> <span class="comment">// x 是 Int 类型 - 强制解包</span></span><br><span class="line">    let y = value     <span class="comment">// y 是 Int!</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 Swift 3.0 中<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func f(value: Int!)&#123;</span><br><span class="line">    let x = value + <span class="number">1</span> <span class="comment">// x 是 Int 类型 - 强制解包</span></span><br><span class="line">    let y = value     <span class="comment">// y 是 Int?</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>具体参考:<br><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0054-abolish-iuo.md" target="_blank" rel="external">SE-0054</a></p>
<h3 id="一些细节的增强">一些细节的增强</h3><ul>
<li>当前文件访问级别,新增的权限控制关键字 <code>fileprivate</code> <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0025-scoped-access-level.md" target="_blank" rel="external">SE-0025</a></li>
<li><code>case</code>中的标签可以使用多种模式 <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0043-declare-variables-in-case-labels-with-multiple-patterns.md" target="_blank" rel="external">SE-0043</a></li>
<li>泛型别名 <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0048-generic-typealias.md" target="_blank" rel="external">SE-0048</a></li>
<li>引用Objective-C 的 key-paths <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0062-objc-keypaths.md" target="_blank" rel="external">SE-0062</a></li>
<li>引用 Objective-C中属性的 getter 和 setter <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0064-property-selectors.md" target="_blank" rel="external">SE-0064</a></li>
<li>协议和协议拓展的别名 <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0092-typealiases-in-protocols.md" target="_blank" rel="external">SE-0092</a><h3 id="移除的功能">移除的功能</h3></li>
</ul>
<ol>
<li>函数柯里化<a href="http://www.cocoachina.com/ios/20141110/10166.html" target="_blank" rel="external">Currying介绍</a></li>
<li>函数参数中的 <code>var</code> <a href="http://www.swiftcafe.io/2016/05/05/swift3-var/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">详细介绍</a></li>
<li>去掉 <code>++</code> 和 <code>--</code> 操作符</li>
<li>C 风格的for循环</li>
<li>通过元组的形式传递函数参数列表 .<a href="http://www.paulrobinson.net/function-parameters-are-tuples-in-swift/" target="_blank" rel="external">详细介绍</a></li>
</ol>
<p>对第5条做一个说明:<br>在 swift 2.2 中,我们可以:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let param = (<span class="number">20</span>,<span class="string">"kenny"</span>,<span class="string">"male"</span>)</span><br><span class="line"></span><br><span class="line">func personInfo(age: Int ,_ name: String ,_ gender: String)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">personInfo(param)</span><br><span class="line"></span><br><span class="line"><span class="comment">//也可以不省略标签</span></span><br><span class="line"></span><br><span class="line">let param = (age:<span class="number">20</span>, name:<span class="string">"kenny"</span>, gender:<span class="string">"male"</span>)</span><br><span class="line"></span><br><span class="line">func personInfo(age age: Int , name: String , gender: String)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">personInfo(param)</span><br></pre></td></tr></table></figure>
<p>这个语法在 Swift3.0中被去掉了.原因是这么传递,可能会和有一个元组类型参数的函数混淆.</p>
<p>参考 : WWDC 2016 Session 402 What’s new in Swift</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/14/Swift/在-Swift-中使用DEBUG标记/" itemprop="url">
                  在 Swift 中使用DEBUG标记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-14T10:18:56+08:00" content="2016-06-14">
              2016-06-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在 OC 中,我们经常会使用 <code>DEBUG</code> 标记来区分开发版本和发行版本,例如,控制调试信息的打印.</p>
<p>但是在使用 Swift 之后,我们发现<code>DEBUG</code> 不能正常工作.原因是 Swift 中没有<code>DEBUG</code>这个标记.例如下面的代码:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func G<span class="built_in">UILog</span>&lt;T&gt;(_ message: T, fileName: String = <span class="preprocessor">#function, methodName: String = #function, lineNumber: Int = #line) &#123;</span></span><br><span class="line">    <span class="preprocessor">#if DEBUG</span></span><br><span class="line">    print(<span class="string">"\(methodName)[\(lineNumber)]:\(message)"</span>)</span><br><span class="line">    <span class="preprocessor">#endif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然并不会报错,但是始终不会有打印.</p>
<h3 id="解决方案">解决方案</h3><p>在 <code>Build Settings</code> 中搜索 <code>other swift flags</code><br><img src="http://7xkv7m.com1.z0.glb.clouddn.com/%E5%9C%A8-Swift-%E4%B8%AD%E4%BD%BF%E7%94%A8DEBUG%E6%A0%87%E8%AE%B014658688864325.jpg" alt=""><br>点击图中红色框内部(注意不是直接点击<code>+</code>),会出现一个这样的对话框.(可能已经有其他标记,如果你使用了 <code>cocoapods</code> 的话,不过不用在意),点击左下角的+ ,或者双击任意空白行,输入<code>-DDEBUG</code>.<br><img src="http://7xkv7m.com1.z0.glb.clouddn.com/%E5%9C%A8-Swift-%E4%B8%AD%E4%BD%BF%E7%94%A8DEBUG%E6%A0%87%E8%AE%B014658689870706.jpg" alt=""><br>点击其它任意区域.结果如图<br><img src="http://7xkv7m.com1.z0.glb.clouddn.com/%E5%9C%A8-Swift-%E4%B8%AD%E4%BD%BF%E7%94%A8DEBUG%E6%A0%87%E8%AE%B014658693876738.jpg" alt=""></p>
<p>现在,<code>DEBUG</code>就能正常工作了!<br>可以通过调整模式来进行测试:<br><img src="http://7xkv7m.com1.z0.glb.clouddn.com/%E5%9C%A8-Swift-%E4%B8%AD%E4%BD%BF%E7%94%A8DEBUG%E6%A0%87%E8%AE%B014658692067377.jpg" alt=""></p>
<p>把图中的地方改成<code>Release</code>,即可进行测试.</p>
<h3 id="Tips">Tips</h3><p>这个编译标记可以随便定义,并不是只能是<code>DEBUG</code>,只要标记能够对应,即可正常工作.编译器只是会看,在<code>Debug</code>模式下,有哪些标记.(或者在 <code>Release</code> 模式下有哪些标记.)例如:<br><img src="http://7xkv7m.com1.z0.glb.clouddn.com/%E5%9C%A8-Swift-%E4%B8%AD%E4%BD%BF%E7%94%A8DEBUG%E6%A0%87%E8%AE%B014658693876738.jpg" alt=""><br>代码:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func G<span class="built_in">UILog</span>&lt;T&gt;(_ message: T, fileName: String = <span class="preprocessor">#function, methodName: String = #function, lineNumber: Int = #line) &#123;</span></span><br><span class="line">    <span class="preprocessor">#if DEFAULT</span></span><br><span class="line">    print(<span class="string">"\(methodName)[\(lineNumber)]:\(message)"</span>)</span><br><span class="line">    <span class="preprocessor">#endif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/13/Swift/从-variable-with-a-setter-must-also-have-a-getter-引发的思考/" itemprop="url">
                  从 variable with a setter must also have a getter 引发的思考
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-13T13:59:26+08:00" content="2016-05-13">
              2016-05-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Swift进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Swift进阶</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天一哥们在群里问:”为什么我不能只重写 setter ,还要多写个 getter ?”<br>我一听也是懵了,后来在 playgroud 里面写,果然得到了一个错误:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">    </span><br><span class="line">    var labelText:String</span><br><span class="line">        &#123;</span><br><span class="line">        set(newValue)&#123;</span><br><span class="line">            <span class="keyword">self</span><span class="variable">.labelText</span> = newValue</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Variable With a setter must also have a getter</code></p>
<p>后来,查找 stackflow, 找到了答案:</p>
<p>一旦你给一个属性添加了 <code>getter</code> 或者 <code>setter</code> ,这个属性将变成 <code>计算属性</code>.</p>
<p>后来,我在<code>The Swift Programming Language 2.2</code> 的 Properties 一章中,找到这样一段描述:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“In addition to stored properties, classes, structures, and enumerations can define computed properties, which <span class="keyword">do</span> not actually store a value. Instead, they provide a getter and an optional setter to retrieve and set other properties and values indirectly.”</span><br></pre></td></tr></table></figure>
<p>除了存储属性之外,类,结构体和枚举还可以定义计算属性,计算属性 <strong>不存储值</strong> ,它们提供一个 <code>getter</code> 和一个 <strong>可选的</strong> <code>setter</code>,借此来读取和<strong>间接地</strong>设置<strong>其他属性和值</strong>.</p>
<p>我在文档中没有找到更多的说明,下面来说说我自己的思考:</p>
<ol>
<li><p>计算属性不存储值,那么也就是说,只能我显式地告诉程序,这个值是怎么来的.所以,需要有一个 <code>getter</code> ,它是必须的,否则这个属性就不是计算属性.而是存储属性.</p>
</li>
<li><p><code>setter</code>是可选的,可以不写 (不写 <code>setter</code> 不写 <code>getter</code>,那么这个属性还是存储属性).但是一旦写了<code>setter</code>(这个属性变成了计算属性),那么<code>getter</code>也是必须的</p>
</li>
</ol>
<h3 id="willSet_和_didSet">willSet 和 didSet</h3><p>刚刚说明了关于计算属性的一些特点,但是问题来了,我们经常有拦截<code>setter</code>来做一些自定义处理的需求. 在 OC 中,这个很简单,重写 <code>setter</code>方法就好了,但是, Swift 中, 添加<code>setter</code>会让属性变味.</p>
<p>Swift 的设计者肯定也是考虑到了这一点,所以提供了 <code>willSet</code> 和 <code>didSet</code>这两个属性观察方法.用法如下:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">    </span><br><span class="line">    var labelText:String = <span class="string">"great"</span></span><br><span class="line">        &#123;</span><br><span class="line">        willSet&#123;</span><br><span class="line">            print(<span class="string">"labeltext will change!"</span>)</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        didSet&#123;</span><br><span class="line">            print(<span class="string">"labeltext did change!"</span>)</span><br><span class="line"><span class="comment">//            labelText = "defalut"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">labeltext will change!</span><br><span class="line">labeltext did change!</span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure>
<p>这样,我们可以过滤值,可以自己处理一些事情,也不会误把存储属性转换成计算属性.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/12/环境、配置相关/手把手教你创建自己的Cocoapods库/" itemprop="url">
                  手把手教你创建自己的Cocoapods库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-12T15:05:37+08:00" content="2016-05-12">
              2016-05-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发环境相关/" itemprop="url" rel="index">
                    <span itemprop="name">开发环境相关</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果您能看这篇文章,相信您已经了解并喜欢上了 Cocoapods, 下面我们一步一步的创建一个属于自己的 Cocoapods 库.</p>
<h2 id="创建">创建</h2><p>通过下面命令,可以使用一个创建向导简历 Cocoapods 库<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib create G<span class="built_in">UICodeSnippet</span></span><br></pre></td></tr></table></figure></p>
<p>然后终端会进行引导,依次选择即可. 回车键确认默认选择.</p>
<p>问题依次是:</p>
<ol>
<li><p>语言 </p>
</li>
<li><p>创建demo工程( 极力推荐创建)</p>
</li>
<li><p>选择测试框架 (可选择默认,如果非常确定没有需要,可以选择None)</p>
</li>
<li><p>View-based Testing  (官方推荐使用 <code>FBSnapShotTestCase</code>)</p>
</li>
<li><p>OC类前缀 (如果语言选择非OC,不会有这项)</p>
</li>
</ol>
<p>打开工程,会发现有一个 GUICodeSnippet 和一个 Pods, 在<br><code>Pods-&gt;Development Pods-&gt;GUICodeSnippet-&gt;Pod-&gt;Classes</code>中,有一个<code>ReplaceMe.m</code></p>
<p>你需要将这个文件替换成自己的代码文件.</p>
<h2 id="源码验证">源码验证</h2><p>进入 Example 目录 , 执行<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure></p>
<p>然后 Xcode 打开 xcworkspace 文件 ,去跑一下项目,如果没有错误,证明添加的代码没有问题,可以继续进行</p>
<h2 id="准备工作">准备工作</h2><h3 id="配置_podspec_文件">配置 podspec 文件</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># Be sure to run `pod lib lint GUICodeSnippet.podspec' to ensure this is a</span><br><span class="line"># valid spec before submitting.</span><br><span class="line">#</span><br><span class="line"># Any lines starting with a # are optional, but their use is encouraged</span><br><span class="line"># To learn more about a Podspec see http://guides.cocoapods.org/syntax/podspec.html</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">Pod::Spec.new do |s|</span><br><span class="line">  s.name             = "GUICodeSnippet"</span><br><span class="line">  s.version          = "0.1.8"</span><br><span class="line">  s.summary          = "code segment of kennyGui"</span><br><span class="line"></span><br><span class="line"># This description is used to generate tags and improve search results.</span><br><span class="line">#   * Think: What does it do? Why did you write it? What is the focus?</span><br><span class="line">#   * Try to keep it short, snappy and to the point.</span><br><span class="line">#   * Write the description between the DESC delimiters below.</span><br><span class="line">#   * Finally, don't worry about the indent, CocoaPods strips it!  </span><br><span class="line">  s.description      = &lt;&lt;-DESC</span><br><span class="line">                      code segment of kenny ,and in most situation ,is for private use only</span><br><span class="line">                       DESC</span><br><span class="line"></span><br><span class="line">  s.homepage         = "https://git.oschina.net/kennygui/GUICodeSnippet"</span><br><span class="line">  # s.screenshots     = "www.example.com/screenshots_1", "www.example.com/screenshots_2"</span><br><span class="line">  s.license          = 'MIT'</span><br><span class="line">  s.author           = &#123; "katsurake" =&gt; "katsurake@foxmail.com" &#125;</span><br><span class="line">  s.source           = &#123; :git =&gt; "https://git.oschina.net/kennygui/GUICodeSnippet.git", :tag =&gt; s.version.to_s &#125;</span><br><span class="line">  # s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;'</span><br><span class="line"></span><br><span class="line">  s.platform     = :ios, '7.0'</span><br><span class="line">  s.requires_arc = true</span><br><span class="line"></span><br><span class="line">  s.source_files = 'Pod/Classes/*.h'</span><br><span class="line">  s.resource_bundles = &#123;</span><br><span class="line">    'GUICodeSnippet' =&gt; ['Pod/Assets/*.png']</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  s.public_header_files = 'Pod/Classes/*.h'</span><br><span class="line">  s.frameworks = 'UIKit', 'MapKit'</span><br><span class="line">  s.dependency 'AFNetworking', '~&gt; 2.3'</span><br><span class="line">  s.dependency 'CocoaLumberjack', '~&gt; 2.2.0'</span><br><span class="line">  s.dependency 'MBProgressHUD', '~&gt; 0.9.2'</span><br><span class="line">  s.dependency 'Masonry', '~&gt; 0.6.4'</span><br><span class="line">  s.dependency 'ReactiveCocoa', '~&gt; 2.5'</span><br><span class="line">  s.dependency 'YapDatabase', '~&gt; 2.8.3'</span><br><span class="line">  s.dependency 'DTCoreText', '~&gt; 1.6.17'</span><br><span class="line">  s.dependency 'MJExtension', '~&gt; 3.0.10'</span><br><span class="line">  end</span><br></pre></td></tr></table></figure>
<p>创建完毕之后,随手使用<br><code>pod lib lint</code><br>命令验证是否编写正确,如果没有正确,根据提示修改即可.</p>
<p>几个好用的命令:</p>
 <figure class="highlight"><figcaption><span>完整打印详情,可以帮助我们调试,用法 ` pod lib lint --verbose`</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> &#10; &#10; ```--allow-warnings``` &#24573;&#30053;&#35686;&#21578;,&#30001;&#20110;&#19968;&#20123;&#19977;&#26041;&#20195;&#30721;&#26377;&#35686;&#21578;,&#25152;&#20197;&#36896;&#25104;&#22987;&#32456;&#26080;&#27861;&#36890;&#36807;,&#21487;&#20197;&#29992;&#36825;&#20010;&#26041;&#27861;&#24573;&#30053;&#35686;&#21578;,&#29992;&#27861;&#21516;&#19978;&#10; &#10;&#10;&#10;### &#21019;&#24314;&#20195;&#30721;&#20179;&#24211;&#10; &#22312;github &#25110;&#32773;&#20854;&#20182;&#25176;&#31649;&#24179;&#21488;&#24314;&#31435;&#19968;&#20010;&#31354;&#39033;&#30446;,&#26368;&#22909;&#39033;&#30446;&#21517;&#31216;&#21644;&#26412;&#22320;&#30340;&#19968;&#33268;&#10;&#10;```objc&#10;&#10;git add .&#10;git commit -m &#8220;Initial Commit&#34;&#10;git remote add origin https://github.com/kennyGui/GUICodeSnippet.git &#10;git push -u origin master</span><br></pre></td></tr></table></figure>
<p>其实我更喜欢的方式是, Clone 空项目,然后替换代码的 .git 文件夹,这样更暴力,具体怎么选择,看个人喜好.</p>
<h3 id="打_tag">打 tag</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git tag -a <span class="number">0.1</span><span class="number">.0</span> -m <span class="string">"初始版本"</span></span><br><span class="line"></span><br><span class="line">通常的git push不会将标签对象提交到git服务器，我们需要进行显式的操作：</span><br><span class="line">git push origin <span class="number">0.1</span><span class="number">.2</span> <span class="preprocessor"># 将v0.1.2标签提交到git服务器</span></span><br><span class="line">或者</span><br><span class="line">git push origin –tags <span class="preprocessor"># 将本地所有标签一次性提交到git服务器</span></span><br><span class="line">验证标签成功</span><br><span class="line">git tag <span class="preprocessor">#查看标签</span></span><br></pre></td></tr></table></figure>
<h2 id="推送描述文件">推送描述文件</h2><p>使用这个命令推送自己的库的信息到官方的 Master 库</p>
<figure class="highlight"><figcaption><span>trunk push GUICodeSnippet.podspec ```objc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;&#20294;&#26159;&#22914;&#26524;&#20320;&#26159;&#31532;&#19968;&#27425;&#20351;&#29992;&#30340;&#35805;,&#38656;&#35201;&#27880;&#20876; Session&#10;&#20351;&#29992;&#22914;&#19979;&#21629;&#20196;&#27880;&#20876;&#33258;&#24049;&#30340;&#37038;&#31665;(&#27880;&#24847;&#26367;&#25442;&#25104;&#33258;&#24049;&#30340;&#37038;&#31665;)</span><br></pre></td></tr></table></figure>
<p>pod trunk register orta@cocoapods.org ‘Orta Therox’ —description=’macbook air’<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">稍后, 邮箱会收到邮件, 点击链接即可</span><br><span class="line"></span><br><span class="line">``` pod trunk push BlinkingLabel<span class="variable">.podspec</span></span><br></pre></td></tr></table></figure></p>
<p>由于网络原因(你懂得),可能会推送失败,多尝试几次即可.</p>
<h2 id="验证">验证</h2><p>可以让同事或者朋友使用<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod search G<span class="built_in">UICodeSnippet</span></span><br></pre></td></tr></table></figure></p>
<p>这个命令进行测试,但是,如果是第一次,应该是找不到的.<br>需要使用<br><code>pod setup</code>更新一下本地的 Maser 库信息</p>
<h2 id="结语">结语</h2><p>好了,现在,你就可以将自己的代码共享给小伙伴使用啦.</p>
<p>现在 pod 里面的 Class 都是放在一个文件夹下的,没有办法实现子文件夹,(即使工程里面有多个文件夹,但是弄好 cocoapods 之后,也是都放到一个文件夹下面了)</p>
<p>这需要我们的 spec 里面配置 subspec ,这个知识点会在下一篇文章中说</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="桂庆" />
          <p class="site-author-name" itemprop="name">桂庆</p>
          <p class="site-description motion-element" itemprop="description">Kenny 肉桂的主页 记录自己的进步</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">72</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2655284735/profile?rightmod=1&wvr=6&mod=personnumber&is_all=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">桂庆</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
