<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>我项目中Layout模块的解析 | 桂庆的个人主页</title>
  <meta name="author" content="桂庆">
  
  <meta name="description" content="桂庆的个人主页 记录自己的学习 工作 感悟">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="我项目中Layout模块的解析"/>
  <meta property="og:site_name" content="桂庆的个人主页"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="桂庆的个人主页" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">桂庆的个人主页</a></h1>
  <h2><a href="/">记录自己的学习 工作 感悟</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">主页</a></li>
    
      <li><a href="/about">关于我</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-08-12T08:49:26.000Z"><a href="/2015/08/12/重构、模式、架构/我项目中Layout模块的解析/">2015-08-12</a></time>
      
      
  
    <h1 class="title">我项目中Layout模块的解析</h1>
  

    </header>
    <div class="entry">
      
        <h2 id="context">context</h2><p>从上次确定使用抽象工厂模式, 到最终项目实现,采用了建造者模式. 因为如果使用抽象工厂模式,将每个模块的layout抽象, 会导致产品体系非常复杂, 难以使用和维护.</p>
<a id="more"></a>
<h2 id="结构图">结构图</h2><p><img src="http://7xkv7m.com1.z0.glb.clouddn.com/我项目中Layout模块的解析LayoutHierarchy.jpg" alt=""></p>
<h3 id="说明">说明</h3><p> <code>GUILayout</code> 是一个由各个模块布局模型组合而成的复杂对象 .</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">GUILayout</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIGeneralLayoutModel</span> *generalLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UILoginLayoutModel</span> *loginLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIDiaryLayoutModel</span> *diaryLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIPregnantManagerLayoutModel</span> * pregnantLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIInfoProviewLayoutModel</span> *infoPreviewLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIPediaLayoutModel</span> *peidaLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIAntenatalCareLayoutModel</span> *anteCareLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UIExpertListLayoutModel</span> * expertLayout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p><code>GUIDiaryLayoutModel</code> 日记模块的参数模型,内部包含了图标大小,间距等尺寸信息.其余的<code>XXXLayoutModel</code>均类似<code>GUIDiaryLayoutModel</code> ,只是内部参数根据实际UI控件有差异.其参数参考UI给出的UI文档.</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">GUIDiaryLayoutModel</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> topViewHeight;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> weekLabelTopMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> weekLabelLeftMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> weekLabelRightMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> weekLabelBottomMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> weekLabelNumberFontSize;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> weekLabelTextFontSize;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> bottomBarHeight;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> addButtonLeftMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> addButtonWH;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> topButtonWH;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> topButtonLeftRightMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> timeLabelFontSize;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> timeLabelRightMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> cellIconLeftMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> cellIconRightMargin;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> cellCellDetailFontSize;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> cellCellHeight;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> cellWeekTextFontSize;</span><br><span class="line"><span class="keyword">@property</span> ( <span class="keyword">assign</span> , <span class="keyword">nonatomic</span> )<span class="built_in">CGFloat</span> cellWeekTextRightMargin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p><code>LayoutBuilder</code> 建造者父类,拥有一个 <code>GUILayout</code> 对象,并规定了建造不同模块参数的方法. </p>
<p>.h文件</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import "GUILayout.h"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@interface LayoutBuilder : NSObject</span><br><span class="line"></span><br><span class="line">@property(nonatomic,strong)GUILayout * layout;</span><br><span class="line"></span><br><span class="line">-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)buildLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configLoginLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configDiaryLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configPregnantMangerLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configPediaLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configAnteCareLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configExpertListLayout;</span><br><span class="line"></span>-<span class="ruby">(<span class="constant">LayoutBuilder</span>*)configInfoPreviewLayout;</span><br><span class="line"></span></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>.m 文件</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"LayoutBuilder.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">LayoutBuilder</span>()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">LayoutBuilder</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)buildLayout</span><br><span class="line">&#123;</span><br><span class="line">    G<span class="built_in">UILayout</span> * layout = [G<span class="built_in">UILayout</span> new];</span><br><span class="line">    _layout = layout;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configLoginLayout&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configDiaryLayout&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configPregnantMangerLayout&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configPediaLayout&#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line">-(LayoutBuilder*)configAnteCareLayout&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line">-(LayoutBuilder*)configExpertListLayout&#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line">-(LayoutBuilder*)configInfoPreviewLayout&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>IP4LayoutBuilder</code> , <code>IP5LayoutBuilder</code> ,<code>IP6LayoutBuilder</code> 这些类分别重写父类的建造方法,给不同的<code>XXXLayoutModel</code>赋不同值.</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#import "IP6LayoutBuilder.h"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@implementation IP6LayoutBuilder</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configLoginLayout&#123;</span><br><span class="line">   </span><br><span class="line">    GUILoginLayoutModel * <span class="variable">model =</span> [GUILoginLayoutModel new];</span><br><span class="line">    model.<span class="variable">iconSize =</span> CGSizeMake(<span class="number">16</span>, <span class="number">16</span>);</span><br><span class="line">    model.<span class="variable">leftViewInsets =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">welcomePageButtonWidth =</span> <span class="number">172</span>;</span><br><span class="line">    model.<span class="variable">welcomepageButtonTitleFontSize =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">welcomePageLeftMargin =</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">welcomePageBottomMargin =</span> <span class="number">6</span>;</span><br><span class="line">    model.<span class="variable">welcomePageMiddleMargin =</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">toSignUpFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">noAccoutStringColor =</span> GUIColorFromRGB(<span class="number">0</span>xffbebe);</span><br><span class="line">    model.<span class="variable">loginButtonWidth =</span> <span class="number">295</span>;</span><br><span class="line">    model.<span class="variable">tableTopMargin =</span> <span class="number">20</span>;</span><br><span class="line">    model.<span class="variable">submitButtonWidth =</span> <span class="number">172</span>;</span><br><span class="line">    model.<span class="variable">submitTitleHeight =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">signupLeftIconLeftRightMargin =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">signupLeftIconTopBottomMargin =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">textFieldTextLeftMargin  =</span><span class="number">10</span>;</span><br><span class="line">    self.layout.<span class="variable">loginLayout =</span> model;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configPregnantMangerLayout&#123;</span><br><span class="line">    </span><br><span class="line">    GUIPregnantManagerLayoutModel * <span class="variable">model =</span> [GUIPregnantManagerLayoutModel new];</span><br><span class="line">    </span><br><span class="line">    model.<span class="variable">topViewHeight =</span> <span class="number">242</span>;</span><br><span class="line">    model.<span class="variable">userIconTopMargin =</span> <span class="number">25</span>;</span><br><span class="line">    model.<span class="variable">userIconWidth =</span> <span class="number">71</span>;</span><br><span class="line">    model.<span class="variable">userIconHeight =</span> <span class="number">71</span>;</span><br><span class="line">    model.<span class="variable">usernameTopMargin =</span> <span class="number">8</span>;</span><br><span class="line">    model.<span class="variable">usernameFontSize =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">pregnantDateTopMargin =</span> <span class="number">35</span>;</span><br><span class="line">    model.<span class="variable">pregnantDateRightMargin =</span> <span class="number">35</span>;</span><br><span class="line">    model.<span class="variable">toBirthLabelFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">toBirthLabelLeftMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">toBirthLabelDescFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">toBirthLabelNumberFontSize =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">editButtonTopMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">editButtonRightMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">editButtonBottomMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">editButtonHeight =</span> <span class="number">30</span>;</span><br><span class="line">    model.<span class="variable">editButtonWidth  =</span> <span class="number">30</span>;</span><br><span class="line">    model.<span class="variable">userIconBorderWidth =</span> <span class="number">2</span>;</span><br><span class="line">    model.<span class="variable">pregnantDateLeftMargin =</span> <span class="number">40</span>;</span><br><span class="line">    model.<span class="variable">pregnantDateFontSize =</span> <span class="number">34</span>;</span><br><span class="line">    </span><br><span class="line">    self.layout.<span class="variable">pregnantLayout =</span> model;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configDiaryLayout&#123;</span><br><span class="line">   </span><br><span class="line">    GUIDiaryLayoutModel * <span class="variable">model =</span> [GUIDiaryLayoutModel new];</span><br><span class="line">    model.<span class="variable">topViewHeight =</span> <span class="number">181</span>;</span><br><span class="line">    model.<span class="variable">weekLabelTopMargin =</span> <span class="number">38</span>;</span><br><span class="line">    model.<span class="variable">weekLabelLeftMargin =</span> <span class="number">55</span>;</span><br><span class="line">    model.<span class="variable">weekLabelRightMargin =</span><span class="number">55</span>;</span><br><span class="line">    model.<span class="variable">weekLabelBottomMargin =</span><span class="number">42</span>;</span><br><span class="line">    model.<span class="variable">weekLabelNumberFontSize =</span><span class="number">52</span>;</span><br><span class="line">    model.<span class="variable">weekLabelTextFontSize =</span><span class="number">26</span>;</span><br><span class="line">    model.<span class="variable">bottomBarHeight =</span><span class="number">44</span>;</span><br><span class="line">    model.<span class="variable">addButtonLeftMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">timeLabelFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">timeLabelRightMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">cellIconLeftMargin =</span> <span class="number">11</span>;</span><br><span class="line">    model.<span class="variable">cellIconRightMargin =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">cellCellDetailFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">cellCellHeight =</span> <span class="number">55</span>;</span><br><span class="line">    model.<span class="variable">cellWeekTextFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">cellWeekTextRightMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">addButtonWH =</span> <span class="number">30</span>;</span><br><span class="line">    model.<span class="variable">topButtonWH =</span> <span class="number">30</span>;</span><br><span class="line">    model.<span class="variable">topButtonLeftRightMargin =</span> <span class="number">60</span>;</span><br><span class="line">    </span><br><span class="line">    self.layout.<span class="variable">diaryLayout =</span> model;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configPediaLayout&#123;</span><br><span class="line">    </span><br><span class="line">    GUIPediaLayoutModel *<span class="variable">model =</span> [GUIPediaLayoutModel new];</span><br><span class="line">    model.<span class="variable">iconTopMargin =</span> <span class="number">25</span>;</span><br><span class="line">    model.<span class="variable">iconBorderWidth =</span> <span class="number">3</span>;</span><br><span class="line">    model.<span class="variable">iconViewWH =</span> <span class="number">100</span>;</span><br><span class="line">    model.<span class="variable">weekLabelNormalFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">weekLabelNumberFontSize =</span> <span class="number">28</span>;</span><br><span class="line">    model.<span class="variable">fruitIconWH =</span> <span class="number">26</span>;</span><br><span class="line">    model.<span class="variable">iconDescFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">babyLengthNormalFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">babyLengthValueFontSize =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">babyLengthBottomMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">controllButtonWidth =</span> <span class="number">40</span>;</span><br><span class="line">    model.<span class="variable">controllBUttonHeight =</span> <span class="number">46</span>;</span><br><span class="line">    model.<span class="variable">timeLineWidth =</span> <span class="number">30</span>;</span><br><span class="line">    model.<span class="variable">cellContentViewLeftRightMargin =</span> <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    self.layout.<span class="variable">peidaLayout =</span> model;</span><br><span class="line">    return  self;</span><br><span class="line">&#125;</span><br><span class="line">-(LayoutBuilder*)configAnteCareLayout&#123;</span><br><span class="line">    GUIAntenatalCareLayoutModel * <span class="variable">model =</span> [GUIAntenatalCareLayoutModel new];</span><br><span class="line">    </span><br><span class="line">    model.<span class="variable">contollTopMargin=</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">controllleftMargin=</span><span class="number">80</span>;</span><br><span class="line">    model.<span class="variable">controlButtonSize=</span> <span class="number">20</span>;</span><br><span class="line">    model.<span class="variable">weekIconTopMargin=</span> <span class="number">25</span>;</span><br><span class="line">    model.<span class="variable">weekIconBottomMargin=</span> <span class="number">25</span>;</span><br><span class="line">    model.<span class="variable">weekIconTitleFontSize=</span><span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">weekIconWeekFontSize=</span><span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">cellLeftMargin=</span><span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">redDotRightMargin=</span><span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">cellHeight=</span><span class="number">44</span>;</span><br><span class="line">    model.<span class="variable">tagViewMiddleMargin=</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">tagViewHeight=</span><span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">tagViewFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    model.<span class="variable">tagViewTopMargin=</span> <span class="number">44</span>;</span><br><span class="line">    model.<span class="variable">cellLineLeftMargin=</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">cellLineRightMargin=</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">cellNoteBottomMargin=</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">cellNoteFontSize=</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">cellNoteLeftMargin =</span> <span class="number">42</span>;</span><br><span class="line">    </span><br><span class="line">    self.layout.<span class="variable">anteCareLayout =</span> model;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configExpertListLayout&#123;</span><br><span class="line">    </span><br><span class="line">    GUIExpertListLayoutModel * <span class="variable">model =</span> [GUIExpertListLayoutModel new];</span><br><span class="line">    model.<span class="variable">iconWH =</span> <span class="number">50</span>;</span><br><span class="line">    model.<span class="variable">iconLeftMargin =</span> <span class="number">14</span>;</span><br><span class="line">    model.<span class="variable">iconRightMargin =</span> <span class="number">14</span>;</span><br><span class="line">    model.<span class="variable">titleFontSize =</span> <span class="number">17</span>;</span><br><span class="line">    model.<span class="variable">detailTextTopMargin =</span> <span class="number">10</span>;</span><br><span class="line">    model.<span class="variable">cellHeight =</span> <span class="number">60</span>;</span><br><span class="line">    model.<span class="variable">detailFontSize =</span> <span class="number">12</span>;</span><br><span class="line">    self.layout.<span class="variable">expertLayout =</span> model;</span><br><span class="line">    return  self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder*)configInfoPreviewLayout&#123;</span><br><span class="line">    </span><br><span class="line">    GUIInfoProviewLayoutModel * <span class="variable">model =</span> [GUIInfoProviewLayoutModel new];</span><br><span class="line">    model.<span class="variable">tableTopMargin =</span> <span class="number">20</span>;</span><br><span class="line">    model.<span class="variable">titleLeftMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">iconCellHeight =</span> <span class="number">54</span>;</span><br><span class="line">    model.<span class="variable">iconWH =</span> <span class="number">41</span>;</span><br><span class="line">    model.<span class="variable">appendViewRrightMargin =</span> <span class="number">15</span>;</span><br><span class="line">    model.<span class="variable">tableHeaderHeight =</span> <span class="number">20</span>;</span><br><span class="line">    </span><br><span class="line">    self.layout.<span class="variable">infoPreviewLayout =</span> model;</span><br><span class="line">    </span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><code>LayoutDirector</code> 规定了<code>LayoutBuilder</code>要执行哪些方法,以及方法的执行顺序,确保最终的<code>GUILayout</code>对象能被顺利初始化.</p>
<p>.h文件</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"LayoutBuilder.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"GUILayout.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">LayoutDirector</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)LayoutBuilder * builder;</span><br><span class="line"></span><br><span class="line">-(G<span class="built_in">UILayout</span>*)layout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>.m 文件</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#<span class="keyword">import</span> <span class="string">"LayoutDirector.h"</span></span><br><span class="line">#<span class="keyword">import</span> <span class="string">"IP4LayoutBuilder.h"</span></span><br><span class="line">#<span class="keyword">import</span> <span class="string">"IP6LayoutBuilder.h"</span></span><br><span class="line">#<span class="keyword">import</span> <span class="string">"IP5LayoutBuilder.h"</span></span><br><span class="line">#<span class="keyword">import</span> <span class="string">"IP6PLayoutBuilder.h"</span></span><br><span class="line"></span><br><span class="line">#define kisiPhone4 ([UIScreen <span class="string">instancesRespondToSelector:</span><span class="annotation">@selector</span>(currentMode)] ? CGSizeEqualToSize(CGSizeMake(640, 960), [[UIScreen mainScreen] currentMode].size) : NO)</span><br><span class="line"></span><br><span class="line">#define kisiPhone5 ([UIScreen <span class="string">instancesRespondToSelector:</span><span class="annotation">@selector</span>(currentMode)] ? CGSizeEqualToSize(CGSizeMake(640, 1136), [[UIScreen mainScreen] currentMode].size) : NO)</span><br><span class="line"></span><br><span class="line">#define kisiPhone6 ([UIScreen <span class="string">instancesRespondToSelector:</span><span class="annotation">@selector</span>(currentMode)] ? CGSizeEqualToSize(CGSizeMake(750, 1334), [[UIScreen mainScreen] currentMode].size) : NO)</span><br><span class="line"></span><br><span class="line">#define kisiPhone6Plus ([UIScreen <span class="string">instancesRespondToSelector:</span><span class="annotation">@selector</span>(currentMode)] ? CGSizeEqualToSize(CGSizeMake(1242,2208), [[UIScreen mainScreen] currentMode].size) : NO)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="annotation">@implementation</span> LayoutDirector</span><br><span class="line"></span><br><span class="line">-(LayoutBuilder *)builder&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!_builder) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (kisiPhone4) &#123;</span><br><span class="line">            _builder = [IP4LayoutBuilder <span class="keyword">new</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(kisiPhone5)&#123;</span><br><span class="line">            _builder = [IP5LayoutBuilder <span class="keyword">new</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(kisiPhone6)&#123;</span><br><span class="line">            _builder = [IP6LayoutBuilder <span class="keyword">new</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(kisiPhone6Plus)&#123;</span><br><span class="line">            _builder = [IP6PLayoutBuilder <span class="keyword">new</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _builder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(GUILayout*)layout&#123;</span><br><span class="line">    </span><br><span class="line">    [self.builder buildLayout];</span><br><span class="line">    [self.builder configLoginLayout];</span><br><span class="line">    [self.builder configDiaryLayout];</span><br><span class="line">    [self.builder configPregnantMangerLayout];</span><br><span class="line">    [self.builder configInfoPreviewLayout];</span><br><span class="line">    [self.builder configExpertListLayout];</span><br><span class="line">    [self.builder configPediaLayout];</span><br><span class="line">    [self.builder configAnteCareLayout];</span><br><span class="line">    <span class="keyword">return</span>  [self.builder layout];</span><br><span class="line">&#125;</span><br><span class="line"><span class="annotation">@end</span></span><br></pre></td></tr></table></figure>
<p>因为这个模块的判断方式是屏幕的尺寸,故结合简单工厂模式,将原本属于调用者的判断逻辑下放到了 <code>LayoutDiretor</code>中.</p>
<p>最后,为了调用者使用方便,在整个布局模块的上层包装了一个 <code>GUILayoutManager</code> ,并在其内部为不同模块定义了宏.方便调用</p>
<p>.h</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"GUILayout.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"LayoutDirector.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#define kGenralLayout [GUILayoutManager layout].generalLayout</span></span><br><span class="line"><span class="preprocessor">#define kLoginLayout  [GUILayoutManager layout].loginLayout</span></span><br><span class="line"><span class="preprocessor">#define kPregnantLayout [GUILayoutManager layout].pregnantLayout</span></span><br><span class="line"><span class="preprocessor">#define kInfoOverviewLayout [GUILayoutManager layout].infoPreviewLayout</span></span><br><span class="line"><span class="preprocessor">#define kExpertLayout [GUILayoutManager layout].expertLayout</span></span><br><span class="line"><span class="preprocessor">#define kDiaryLayout  [GUILayoutManager layout].diaryLayout</span></span><br><span class="line"><span class="preprocessor">#define kPediaLayout  [GUILayoutManager layout].peidaLayout</span></span><br><span class="line"><span class="preprocessor">#define kAnteLayout [GUILayoutManager layout].anteCareLayout</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">GUILayoutManager</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>)G<span class="built_in">UILayout</span> * layout;</span><br><span class="line"></span><br><span class="line">+(G<span class="built_in">UILayout</span>*)layout;</span><br><span class="line"></span><br><span class="line">+(instancetype) sharedLayoutManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>.m</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#import "GUILayoutManager.h"</span></span><br><span class="line"></span><br><span class="line">@implementation GUILayoutManager</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(GUILayout *<span class="function">)</span>layout&#123;</span><br><span class="line">   <span class="instruction"> if </span>(!_layout<span class="function">)</span> &#123;</span><br><span class="line">        <span class="class">LayoutDirector * director = [LayoutDirector new];</span></span><br><span class="line">        GUI<span class="class">Layout *layout = [director layout];</span></span><br><span class="line">        _layout = layout;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="instruction"> return </span> _layout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+(GUILayout*<span class="function">)</span>layout&#123;</span><br><span class="line">    </span><br><span class="line">    GUI<span class="class">LayoutManager * manager = [GUILayoutManager new];</span></span><br><span class="line">   <span class="instruction"> return </span>manager.layout;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+(instancetype<span class="function">)</span>allocWithZone:(struct _NSZone *<span class="function">)</span>zone&#123;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword"> static</span>  dispatch_once_t onceToken;</span><br><span class="line">   <span class="keyword"> static</span>  id <span class="instruction"> instance </span>= nil;</span><br><span class="line">   <span class="function"> dispatch_once(</span>&amp;onceToken, ^&#123;</span><br><span class="line">       <span class="instruction"> instance </span>= <span class="keyword">[</span>super allocWithZone:zone];</span><br><span class="line">    &#125;<span class="function">)</span>;</span><br><span class="line">   <span class="instruction"> return </span>instance;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+(instancetype<span class="function">)</span>sharedLayoutManager&#123;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword"> static</span> dispatch_once_t onecToken;</span><br><span class="line">   <span class="keyword"> static</span> id instance;</span><br><span class="line">   <span class="function"> dispatch_once(</span>&amp;onecToken, ^&#123;</span><br><span class="line">       <span class="instruction"> instance </span>= <span class="keyword">[</span><span class="keyword">[</span>self alloc] init];</span><br><span class="line">    &#125;<span class="function">)</span>;</span><br><span class="line">   <span class="instruction"> return </span>instance;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h2 id="便利">便利</h2><p>如果UI出了新的尺寸,只需要在特定屏幕的的 XXXLayoutBuilder的对应方法中修改参数值即可, 项目中其它文件均无需修改.<br>例如:<br>    要加大iPhone6 下 ,百科模块的用户头像大小.<br>    <code>IP6LayoutBuilder.m</code>-&gt; <code>configPediaLayout</code> -&gt;<code>configPediaLayout</code>方法中,将<code>model.iconViewWH</code>修改即可.</p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/重构、模式、架构/">重构、模式、架构</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/重构、模式、架构/">重构、模式、架构</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>

<!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="2015/08/12/重构、模式、架构/我项目中Layout模块的解析/" data-title="我项目中Layout模块的解析" data-url="http://yoursite.com/2015/08/12/重构、模式、架构/我项目中Layout模块的解析/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"guiqingblog"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Core-Aniamtion深入探讨/">Core Aniamtion深入探讨</a><small>15</small></li>
  
    <li><a href="/categories/Swift进阶/">Swift进阶</a><small>2</small></li>
  
    <li><a href="/categories/iOS-OC/">iOS&amp;OC</a><small>11</small></li>
  
    <li><a href="/categories/主页维护记录/">主页维护记录</a><small>3</small></li>
  
    <li><a href="/categories/开发环境相关/">开发环境相关</a><small>3</small></li>
  
    <li><a href="/categories/知识技巧总结/">知识技巧总结</a><small>1</small></li>
  
    <li><a href="/categories/辅助编程技能/">辅助编程技能</a><small>7</small></li>
  
    <li><a href="/categories/重构、模式、架构/">重构、模式、架构</a><small>9</small></li>
  
    <li><a href="/categories/高效OC编程/">高效OC编程</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Core-Aniamtion深入探讨/">Core Aniamtion深入探讨</a><small>15</small></li>
  
    <li><a href="/tags/Swift-进阶/">Swift 进阶</a><small>1</small></li>
  
    <li><a href="/tags/主页维护记录/">主页维护记录</a><small>1</small></li>
  
    <li><a href="/tags/小脚本大智慧/">小脚本大智慧</a><small>1</small></li>
  
    <li><a href="/tags/开发环境相关/">开发环境相关</a><small>1</small></li>
  
    <li><a href="/tags/正则表达式/">正则表达式</a><small>2</small></li>
  
    <li><a href="/tags/测试小样/">测试小样</a><small>1</small></li>
  
    <li><a href="/tags/设计模式/">设计模式</a><small>1</small></li>
  
    <li><a href="/tags/辅助编程技能/">辅助编程技能</a><small>2</small></li>
  
    <li><a href="/tags/重构、模式、架构/">重构、模式、架构</a><small>4</small></li>
  
    <li><a href="/tags/问题解决和思考/">问题解决和思考</a><small>5</small></li>
  
    <li><a href="/tags/高效OC编程/">高效OC编程</a><small>4</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 桂庆
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>